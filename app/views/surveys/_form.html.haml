= simple_form_for [@customer, @survey] do |f|
  - if @survey.errors.any?
    .alert.alert-danger
      = @survey.errors[:questions][0] || @survey.errors[:avatar][0]

  = f.input :name, label: false, placeholder: "Name"
  = f.input :description, label: false, input_html: { rows: 4 }, placeholder: "Description"
  .image-fields
    .row
      .col-xs-3
        .file-upload
          %span Upload an avatar for the survey
          = f.file_field :avatar, label: false, class: "upload"
          = f.input :avatar_cache, as: :hidden
      .col-xs-5
        %small.file-name.m-t-0
          = file_name f.object.avatar

  = f.fields_for :questions do |builder|
    = render "question_fields", f: builder

  .form-group
    = link_to_add_fields fa_icon("plus", text: "Add some questions"),
      f, :questions, "btn btn-default btn-sm"

  = f.button :submit, "Save survey",
    class: "btn-block btn-primary", data: { disable_with: "Saving survey..." }
