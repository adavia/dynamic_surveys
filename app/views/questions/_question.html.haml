.question-report
  %h3
    = question.title

  %ul.list-group
    %li.list-group-item
      %span.counter.pull-right
        = question.answers_count
      = t "app.survey.show.answers"
    - if ["single", "list"].include? question.question_type
      - @choice = question.answers.choice_counter.each do |answer|
        %li.list-group-item
          %span.counter.pull-right
            = answer[1]
          = answer[0]
    - if question.question_type == "image"
      - @image = question.answers.image_counter.each do |answer|
        %li.list-group-item
          %span.counter.pull-right
            = answer[1]
          = answer[0]
    - if question.question_type == "multiple"
      - @multiple = question.answers.multiple_choice_counter.each do |answer|
        %li.list-group-item
          %span.counter.pull-right
            = answer[1]
          = answer[0]
    - if question.question_type == "rating"
      - @rating = question.answers.rating_average.each do |answer|
        %li.list-group-item
          %span.counter.pull-right
            = number_with_precision(answer[1], precision: 2)
          = answer[0]
      %li.list-group-item
        %span.counter.pull-right
          = number_with_precision(rating_avg(@rating.values), precision: 2)
        = t "app.survey.show.average_rating"
      - if current_page?(action: :show) && question.answers.any?
        %li.list-group-item
          = link_to t("app.survey.show.answer_show"), [question, :answers],
            remote: true

    - if ["open", "date", "description", "phone", "email"].include? question.question_type
      - if current_page?(action: :show) && question.answers.any?
        %li.list-group-item
          .clearfix
            = link_to t("app.survey.show.answer_show"), [question, :answers],
              remote: true, class: "pull-left"
            .export-links
              = link_to t("app.survey.show.survey_export"),
                question_answers_path(question, format: "csv"),
                class: "btn btn-xs btn-primary"

  .question-charts
    - if ["single", "list"].include? question.question_type
      - if @choice.any?
        %h4.m-b-0= t("app.survey.report.pie")
        .row
          .col-md-6
            = pie_chart @choice, library: { pieSliceText: "value-and-percentage",
              legend: "none" }
          .col-md-6
            = bar_chart @choice
    - if question.question_type == "multiple"
      - if @multiple.any?
        %h4.m-b-0= t("app.survey.report.pie")
        .row
          .col-md-6
            = pie_chart @multiple, library: { pieSliceText: "value-and-percentage",
              legend: "none" }
          .col-md-6
            = bar_chart @multiple
    - if question.question_type == "image"
      - if @image.any?
        %h4.m-b-0= t("app.survey.report.pie")
        .row
          .col-md-6
            = pie_chart @image, library: { pieSliceText: "value-and-percentage",
              legend: "none" }
          .col-md-6
            = bar_chart @image
  %hr
